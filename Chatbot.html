<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RutaPro ‚Äì Chatbot de Carrera</title>
<meta name="description" content="Chatbot demo que gu√≠a a colaboradores para descubrir su mejor ruta de carrera, usando reglas simples y datos de ejemplo. Sin dependencias externas."/>
<style>
  :root{
    --primary:#2a9d3e; --primary-600:#238536; --accent:#00c271;
    --bg:#f7faf8; --surface:#ffffff; --text:#1a1f1c; --muted:#6b7280;
    --shadow:0 10px 30px rgba(0,0,0,.08); --radius:16px; --radius-sm:12px;
    --glass:rgba(255,255,255,.6); --glass-border:rgba(255,255,255,.35);
  }
  [data-theme="dark"]{ --primary:#39d16f; --primary-600:#2fb965; --accent:#14d990; --bg:#0e1411; --surface:#121a16; --text:#e9f4ee; --muted:#90a39a; --glass:rgba(18,26,22,.45); --glass-border:rgba(255,255,255,.08); --shadow:0 10px 28px rgba(0,0,0,.45);}  

  /* Tipograf√≠a */
  html,body{height:100%}
  body{margin:0; background:var(--bg); color:var(--text); line-height:1.55; font-family:"Segoe UI", Inter, "Helvetica Neue", Arial, system-ui, -apple-system, "Liberation Sans", sans-serif; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale}
  h1,h2,h3{margin:.2rem 0 .5rem; line-height:1.2; font-weight:800}
  a{color:var(--primary)}
  :focus-visible{outline:3px solid var(--accent); outline-offset:3px; border-radius:10px}

  .wrap{max-width:1100px; margin:0 auto; padding:16px}
  .topbar{display:flex; align-items:center; justify-content:space-between; gap:12px; position:sticky; top:0; z-index:10; backdrop-filter:saturate(140%) blur(8px); background:linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.55)); border-bottom:1px solid var(--glass-border); padding:10px 12px}
  [data-theme="dark"] .topbar{background:linear-gradient(180deg, rgba(18,26,22,.75), rgba(18,26,22,.45))}
  .brand{display:flex; align-items:center; gap:10px; font-weight:900}
  .brand svg{width:26px; height:26px}
  .actions{display:flex; gap:8px; align-items:center}
  .btn{appearance:none; border:none; cursor:pointer; background:var(--primary); color:#fff; font-weight:800; padding:10px 14px; border-radius:999px; box-shadow:var(--shadow); transition:transform .18s ease, background .18s ease}
  .btn:hover{transform:translateY(-1px); background:var(--primary-600)}
  .btn.ghost{background:transparent; color:var(--text); border:1px solid rgba(0,0,0,.10)}
  [data-theme="dark"] .btn.ghost{border-color:rgba(255,255,255,.18)}

  .hero{display:grid; gap:14px; grid-template-columns: 1.1fr .9fr; align-items:center; padding:26px 0}
  @media (max-width: 900px){ .hero{grid-template-columns:1fr} }
  .hero-card{background:var(--glass); border:1px solid var(--glass-border); border-radius:var(--radius); padding:18px; box-shadow:var(--shadow)}
  .muted{color:var(--muted)}

  .chat{display:grid; grid-template-rows: auto 1fr auto; height:560px; gap:10px}
  .msgs{overflow:auto; display:grid; gap:10px; padding:6px}
  .msg{max-width:80%; padding:10px 12px; border-radius:14px; box-shadow:var(--shadow); font-size:15px}
  .msg.you{justify-self:end; background:rgba(42,157,62,.12)}
  .msg.bot{justify-self:start; background:rgba(0,0,0,.05)}
  [data-theme="dark"] .msg.bot{background:rgba(255,255,255,.06)}
  .composer{display:flex; gap:8px}
  input[type="text"]{flex:1; padding:12px; border-radius:12px; border:1px solid rgba(0,0,0,.12); background:var(--surface); color:var(--text)}
  [data-theme="dark"] input[type="text"]{border-color:rgba(255,255,255,.18)}
  .hint{font-size:.9rem}

  .side{display:grid; gap:12px}
  .card{background:var(--surface); border-radius:var(--radius); border:1px solid rgba(0,0,0,.06); padding:14px; box-shadow:var(--shadow)}
  [data-theme="dark"] .card{border-color:rgba(255,255,255,.12)}
  .badge{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; background:rgba(42,157,62,.10); color:var(--primary); font-weight:800; font-size:.85rem}
  .small{font-size:.9rem}
  .k{display:grid; gap:6px; grid-template-columns:1fr 1fr}

  .list{display:grid; gap:6px}
  .li{display:flex; gap:8px; align-items:flex-start}
  .i{width:18px; height:18px; border-radius:50%; background:rgba(0,0,0,.08); display:inline-flex; align-items:center; justify-content:center; font-weight:800; color:var(--muted)}

</style>
</head>
<body>
  <div class="topbar">
    <div class="brand">
      <svg viewBox="0 0 100 100" aria-hidden="true"><defs><linearGradient id="g1" x1="0" x2="1" y1="0" y2="1"><stop stop-color="var(--primary)" offset="0"/><stop stop-color="var(--accent)" offset="1"/></linearGradient></defs><polygon points="50,5 61,36 95,36 67,56 77,90 50,70 23,90 33,56 5,36 39,36" fill="url(#g1)"/></svg>
      <span>RutaPro</span>
    </div>
    <div class="actions">
      <button class="btn ghost" id="toggleTheme">üåû/üåô</button>
      <a class="btn" href="#composer">Comenzar</a>
    </div>
  </div>

  <div class="wrap">
    <section class="hero">
      <div>
        <h1>Chatbot de Carrera</h1>
        <p class="muted">Gu√≠a simulada para descubrir tu <strong>mejor ruta</strong> dentro del banco. Usa reglas claras, requisitos y un micro‚Äëscore.
          <br><span class="hint">Demo sin datos reales.</span></p>
        <div class="hero-card small">
          <span class="badge">C√≥mo te ayudo</span>
          <ul class="list" style="margin:8px 0 0 0; padding-left:18px">
            <li>1) Entiendo tu inter√©s (√°rea/familia/puesto).</li>
            <li>2) Busco rutas posibles y verifico requisitos.</li>
            <li>3) Te doy una ruta sugerida, brechas y pr√≥ximos pasos.</li>
          </ul>
        </div>
      </div>
      <div class="hero-card">
        <div class="chat" role="log" aria-live="polite">
          <div id="msgs" class="msgs"></div>
          <div class="small muted k">
            <div><strong>√Åreas:</strong> Finanzas, Tecnolog√≠a, Recursos Humanos</div>
            <div><strong>Familias (ej.):</strong> Contabilidad, Desarrollo de Software, Talento</div>
          </div>
          <div class="composer" id="composer">
            <input id="q" type="text" placeholder="Ej: Quiero pasar a Desarrollador Senior" aria-label="Escribe tu inter√©s"/>
            <button id="send" class="btn">Enviar</button>
          </div>
        </div>
      </div>
    </section>

    <section class="side">
      <div class="card">
        <h3>Ejemplos √∫tiles</h3>
        <div class="list">
          <div class="li"><span class="i">i</span><span>"Quiero ir a Analista Senior en Contabilidad"</span></div>
          <div class="li"><span class="i">i</span><span>"Estoy en Desarrollador Junior y me interesa Arquitecto de Software"</span></div>
          <div class="li"><span class="i">i</span><span>"Me gustar√≠a moverme a Talento (RRHH)"</span></div>
        </div>
      </div>
      <div class="card">
        <h3>Regla de decisi√≥n (micro)</h3>
        <p class="small">Score = Resultados 70% + Comportamiento 20% + Potencial 10% (estimado por reglas).
          Si Score ‚â• 85 y ‚â• 90% requisitos ‚Üí <strong>Ready Now</strong>. 70‚Äì84 ‚Üí <strong>Ready Soon</strong>. &lt;70 ‚Üí <strong>Build Skills First</strong>.</p>
      </div>
    </section>
  </div>

<script>
// ================== Datos de ejemplo (reutiliza del ecosistema RutaPro) ==================
const DATA = {
  rutas: [
    { area:'Tecnolog√≠a', familia:'Desarrollo de Software', puesto:'Desarrollador Junior', chain:['Desarrollador Junior','Desarrollador Senior','Arquitecto de Software'] },
    { area:'Tecnolog√≠a', familia:'Desarrollo de Software', puesto:'Desarrollador Senior', chain:['Desarrollador Senior','Arquitecto de Software','L√≠der de Equipo T√©cnico'] },
    { area:'Finanzas', familia:'Contabilidad', puesto:'Analista Junior', chain:['Analista Junior','Analista Senior','Gerente de Contabilidad'] },
    { area:'Recursos Humanos', familia:'Talento', puesto:'Asistente de Talento', chain:['Asistente de Talento','Especialista en Reclutamiento','Gerente de Talento'] },
  ],
  requisitos: {
    'Desarrollador Junior': ['Python b√°sico','SQL intermedio','Git b√°sico'],
    'Desarrollador Senior': ['APIs REST','Testing auto','Dise√±o de soluciones'],
    'Arquitecto de Software': ['Microservicios','Patrones de dise√±o','Seguridad app'],
    'L√≠der de Equipo T√©cnico': ['Liderazgo','Gesti√≥n de conflictos','Mentor√≠a'],
    'Analista Junior': ['NIIF b√°sicas','Excel avanzado','Conciliaciones'],
    'Analista Senior': ['Software contable','Normativa tributaria','Auditor√≠a'],
    'Gerente de Contabilidad': ['Planeaci√≥n estrat√©gica','Gesti√≥n de equipos','Stakeholders'],
    'Asistente de Talento': ['ATS b√°sico','Ciclo de reclutamiento'],
    'Especialista en Reclutamiento': ['Entrevista por competencias','Analytics RRHH'],
    'Gerente de Talento': ['Estrategia de talento','Liderazgo de equipo']
  },
  // pesos simulados para estimar un score a partir del texto
  pesos: { resultados:.7, comportamiento:.2, potencial:.1 }
};

// ================== Utilidades UI ==================
const $ = (s, r=document) => r.querySelector(s);
function pushMsg(text, who='bot'){
  const el = document.createElement('div'); el.className='msg ' + (who==='you'?'you':'bot'); el.innerHTML = text; $('#msgs').appendChild(el); $('#msgs').scrollTop = $('#msgs').scrollHeight;
}
function badge(t){ return `<span class="badge">${t}</span>` }

// ================== NLP muy simple por reglas ==================
function parseIntent(q){
  const t = q.toLowerCase();
  // detectar puesto objetivo expl√≠cito con "a X" o presente en cadenas
  const knownJobs = Object.keys(DATA.requisitos);
  let target = knownJobs.find(j => t.includes(j.toLowerCase()));
  // detectar familia/√°rea si se menciona
  let area = null, familia = null;
  if(t.includes('tecnolog')) area = 'Tecnolog√≠a';
  if(t.includes('finanzas') || t.includes('contabil')) { area = 'Finanzas'; familia = 'Contabilidad'; }
  if(t.includes('recursos humanos') || t.includes('talento')) { area='Recursos Humanos'; familia='Talento'; }
  if(t.includes('desarrollo')) familia = 'Desarrollo de Software';
  return { target, area, familia };
}

function findRoutes({target, area, familia}){
  // Si hay target, encontrar cadenas que lo contengan o lleven hacia √©l.
  let candidates = DATA.rutas.filter(r =>
    (!area || r.area===area) && (!familia || r.familia===familia) && (!target || r.chain.includes(target))
  );
  if(!candidates.length && target){
    // Relajar por √°rea/familia desconocida
    candidates = DATA.rutas.filter(r => r.chain.includes(target));
  }
  if(!candidates.length && (area||familia)){
    candidates = DATA.rutas.filter(r => (!area || r.area===area) && (!familia || r.familia===familia));
  }
  if(!candidates.length){ candidates = DATA.rutas.slice(0,2); }
  return candidates;
}

function requisitosPct(chain){
  // marca aleatoria de cumplimiento para la demo
  const reqs = chain.flatMap(p => DATA.requisitos[p]||[]);
  const ok = reqs.filter(()=> Math.random()>.35).length;
  const pct = Math.round(ok*100/Math.max(1,reqs.length));
  return { pct, reqs };
}

function estimateScore(text){
  // heur√≠stica: m√°s t√©rminos "t√©cnicos" ‚Üí mayor resultados; menciones de equipo ‚Üí comportamiento; deseo de liderazgo ‚Üí potencial
  const t = text.toLowerCase();
  const kR = ['proyecto','api','modelo','automat','arquitect','microserv'];
  const kC = ['equipo','colabora','mentor','comunica'];
  const kP = ['lider','crecim','potencial'];
  const nR = kR.reduce((a,k)=>a+(t.includes(k)?1:0),0);
  const nC = kC.reduce((a,k)=>a+(t.includes(k)?1:0),0);
  const nP = kP.reduce((a,k)=>a+(t.includes(k)?1:0),0);
  const sR = Math.min(100, 50 + nR*10);
  const sC = Math.min(100, 50 + nC*12);
  const sP = Math.min(100, 50 + nP*12);
  const total = Math.round(DATA.pesos.resultados*sR + DATA.pesos.comportamiento*sC + DATA.pesos.potencial*sP);
  return { total, breakdown:{ resultados:sR, comportamiento:sC, potencial:sP } };
}

function decision(score, reqPct){
  if(score>=85 && reqPct>=90) return 'Ready Now';
  if(score>=70) return 'Ready Soon';
  return 'Build Skills First';
}

function explainWhy(route, reqPct, score){
  return `Suger√≠ <strong>${route.chain.join(' ‚Üí ')}</strong> porque tu inter√©s coincide con <em>${route.familia}</em> en <em>${route.area}</em>, el cumplimiento de requisitos estimado es <strong>${reqPct}%</strong> y el score proyectado es <strong>${score}</strong>.`;
}

// ================== Chat ==================
function reply(q){
  const intent = parseIntent(q);
  const routes = findRoutes(intent);
  const best = routes[0];
  const { pct:reqPct } = requisitosPct(best.chain);
  const { total:score, breakdown } = estimateScore(q);
  const dec = decision(score, reqPct);

  pushMsg(`Entendido. ${badge('Inter√©s')} ${intent.area||''} ${intent.familia||''} ${intent.target||''}`.trim(), 'bot');
  pushMsg(`${badge('Ruta sugerida')} <br>${best.chain.join(' ‚Üí ')}`, 'bot');
  pushMsg(`${badge('Requisitos')} Estimado de cumplimiento: <strong>${reqPct}%</strong>.`, 'bot');
  pushMsg(`${badge('Score')} Total: <strong>${score}</strong> (Res: ${breakdown.resultados}, Comp: ${breakdown.comportamiento}, Pot: ${breakdown.potencial})`, 'bot');
  pushMsg(`${badge('Decisi√≥n')} <strong>${dec}</strong>`, 'bot');
  pushMsg(`${badge('Siguientes pasos')} Si faltan requisitos, completa 1 curso y solicita <em>mentoring</em> de 4‚Äì6 semanas.`, 'bot');
  pushMsg(`${badge('Por qu√©')} ${explainWhy(best, reqPct, score)}`, 'bot');
}

function init(){
  // saludo
  pushMsg('¬°Hola! Soy tu gu√≠a de RutaPro. Dime a d√≥nde te gustar√≠a moverte (√°rea/familia/puesto) y te sugerir√© una ruta.', 'bot');
  // handlers
  const send = ()=>{ const v = $('#q').value.trim(); if(!v) return; pushMsg(v,'you'); $('#q').value=''; reply(v); };
  $('#send').addEventListener('click', send);
  $('#q').addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ send(); }});
  // tema
  $('#toggleTheme').addEventListener('click', ()=>{
    const html = document.documentElement; html.setAttribute('data-theme', html.getAttribute('data-theme')==='light'?'dark':'light');
  });
}

document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
